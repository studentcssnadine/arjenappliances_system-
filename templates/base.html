{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ArjenSystem - Arjen Appliances Trading{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'images/arjen_logo.png' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'images/arjen_logo.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    {% block extra_css %}{% endblock %}
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1e3a8a;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --text: #333;
            --text-light: #777;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f9;
            line-height: 1.6;
        }

        img { max-width: 100%; height: auto; }

        /* Navigation Bar */
        .navbar {
            background: linear-gradient(135deg, var(--primary), #34495e);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand img.logo {
            height: 40px;
            width: auto;
        }

        .brand-text {
            font-size: 1.2rem;
            font-weight: 600;
            line-height: 1.2;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Main Container */
        .main-container {
            display: flex;
            min-height: calc(100vh - 70px);
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 2rem;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-bottom: 1px solid #e1e5e9;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.1);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1e40af;
            transform: translateY(-1px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .btn-danger {
            background: var(--accent);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-1px);
        }

        /* Alerts */
        .alert {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            border-color: var(--success);
            color: #155724;
        }

        .alert-error {
            background: #f8d7da;
            border-color: var(--accent);
            color: #721c24;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: var(--warning);
            color: #856404;
        }

        /* Responsive */
        /* Off-canvas sidebar for tablets/phones */
        @media (max-width: 992px) {
            .main-container { flex-direction: column; }
            .content { padding: 1rem; }
            .navbar { padding: 0.75rem 1rem; }
            .brand-text { font-size: 1rem; }
            .btn { padding: 0.5rem 0.75rem; font-size: 0.95rem; }

            /* Force sidebar to act as off-canvas drawer on mobile */
            body .sidebar {
                position: fixed !important;
                top: 60px !important;
                left: 0 !important;
                transform: translateX(-100%) !important;
                width: 260px !important;
                height: calc(100vh - 60px) !important;
                background: #ffffff !important;
                box-shadow: 2px 0 12px rgba(0,0,0,0.12) !important;
                transition: transform 0.3s ease !important;
                z-index: 4000 !important;
                overflow-y: auto !important;
            }
            body.sidebar-open .sidebar { transform: translateX(0) !important; }
            /* Dim content slightly when sidebar is open */
            body.sidebar-open .content { filter: blur(1px); }
        }

        /* Mobile tweaks */
        @media (max-width: 576px) {
            .brand { gap: 0.5rem; }
            .brand-text { font-size: 0.95rem; }
            .user-menu span { font-size: 0.9rem; }
            .user-badge { padding: 3px 10px; font-size: 0.7rem; }
            .navbar { gap: 0.5rem; }
        }

        /* Mobile navbar controls: circular hamburger + profile like Customers List */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: nowrap;
                gap: 0.5rem;
            }

            .navbar .brand {
                flex: 1 1 auto;
                min-width: 0;
            }

            /* Circular hamburger button */
            .navbar #sidebarToggle {
                margin-left: auto;
                margin-right: 0.25rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 40px;
                height: 40px;
                padding: 0;
                border-radius: 9999px;
                border: 1px solid rgba(255,255,255,0.7);
                background: rgba(15,23,42,0.35);
            }

            .navbar #sidebarToggle i {
                font-size: 1.1rem;
                color: #ffffff;
            }

            .navbar .user-menu {
                order: 3;
            }

            /* Circular profile icon container */
            .navbar .user-profile-dropdown .user-info-display {
                padding: 0 !important;
                width: 40px;
                height: 40px;
                border-radius: 9999px;
                border: 1px solid rgba(255,255,255,0.7);
                background: rgba(15,23,42,0.35);
                justify-content: center;
            }

            /* Hide dropdown arrow text so only the circular avatar shows */
            .navbar .user-profile-dropdown .dropdown-arrow {
                display: none;
            }
        }

        /* Responsive tables: allow horizontal scroll on narrow screens */
        @media (max-width: 768px) {
            .content table { display: block; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
            .content th, .content td { white-space: nowrap; }
        }

        /* Modal responsiveness for small screens */
        @media (max-width: 576px) {
            #editProfileOverlay .modal-card { max-width: 95vw; border-radius: 10px; }
        }

        /* Generic responsive table helper (opt-in via wrapper) */
        .table-responsive { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .table-responsive table { width: 100%; border-collapse: collapse; }

        /* Mobile sidebar overlay */
        #mobileSidebarOverlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.35);
            backdrop-filter: blur(1px);
            -webkit-backdrop-filter: blur(1px);
            z-index: 3500;
        }
        @media (max-width: 992px) {
            body.sidebar-open #mobileSidebarOverlay { display: block; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="brand">
            <img class="logo" src="{% static 'images/arjen_logo.png' %}" alt="Arjen Logo">
            <span class="brand-text">ARJEN APPLIANCES TRADING</span>
        </div>
        <!-- Mobile hamburger to toggle sidebar -->
        <button id="sidebarToggle" class="btn btn-secondary" style="display:none;">
            <i class="fas fa-bars"></i>
        </button>
        
        {% if user.is_authenticated %}
        <div class="user-menu">
            {% include 'includes/user_profile_dropdown.html' %}
        </div>
        {% endif %}
    </nav>

    <!-- Mobile overlay for off-canvas sidebar -->
    <div id="mobileSidebarOverlay" aria-hidden="true"></div>

    <!-- Main Content -->
    <div class="main-container">
        {% block sidebar %}{% endblock %}
        
        <main class="content">
            <!-- Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    // Show hamburger on small screens
    (function() {
        const toggleBtn = document.getElementById('sidebarToggle');
        function updateHamburger() {
            if (!toggleBtn) return;
            if (window.innerWidth <= 992) {
                toggleBtn.style.display = 'inline-flex';
            } else {
                toggleBtn.style.display = 'none';
                document.body.classList.remove('sidebar-open');
            }
        }
        updateHamburger();
        window.addEventListener('resize', updateHamburger);
        if (toggleBtn) {
            toggleBtn.addEventListener('click', function() {
                document.body.classList.toggle('sidebar-open');
            });
        }
        // Close sidebar when clicking overlay on mobile
        const overlay = document.getElementById('mobileSidebarOverlay');
        if (overlay) {
            overlay.addEventListener('click', function() {
                document.body.classList.remove('sidebar-open');
            });
        }
    })();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
